{% extends "layout.html" %}
{% block title %}HXTool - Bulk Acquisitions{% endblock %}
{% block navlocation %}Bulk Acquisitions{% endblock %}
{% block content %}

<script>
	$(document).ready(function() {
                var table = $('#bulkTable').DataTable( {
                        "info": false,
                        "pageLength": 15,
                        "lengthChange": false
                });
				
				
		$('#bulkTable').on('click', '.clickable-row', function() {
			window.document.location = $(this).data("href");
		});
		
		$("div[id^='prog_']").each(function() {
			$(this).progress()
		});
		
		$("div[id^='crate_']").each(function() {
			$(this).progress()
		});

		$("#checkboxStore").click(function() {
			$("#checkboxStore").prop('checked', true);
			$("#divStore").css("background", "rgb(225,225,225)");
			$("#divFile").css("background", "rgb(242,242,242)");
			$("#checkboxFile").prop('checked', false);
		});

		$("#checkboxFile").click(function() {
			$("#checkboxFile").prop('checked', true);
			$("#divFile").css("background", "rgb(225,225,225)");
			$("#divStore").css("background", "rgb(242,242,242)");			
			$("#checkboxStore").prop('checked', false);
		});

	});
</script>

<form method='POST' action='/bulk' enctype="multipart/form-data">
        <div class='tableTitle'>
                New bulk acquisition
        </div>
	<div class='inputArea' style='width: 900px;'>

		<div id='divStore' style='width: 250px; float: left; padding: 10px; margin-right: 15px; vertical-align: top; border: 1px solid rgb(215,215,215); border-radius: 5px; background: rgb(225,225,225);'>
			<input type='checkbox' name='store' id='checkboxStore' checked>
			<b>From HXTool</b><br><br>
			{% if scripts %} {{ scripts|safe }} {% endif %}
		</div>
		<div id='divFile' style='width: 250px; float: left; padding: 10px; vertical-align: top; border: 1px solid rgb(215,215,215); border-radius: 5px;'>			<input type='checkbox' name='file' id='checkboxFile'>
			<b>From file</b><br><br>
			<input type='file' id='bulkscript' name='bulkscript'>
		</div>
		<div style='clear: both;'></div>

		<br>
		<b>Hostset</b><br>
		<select name='bulkhostset' id='bulkhostset'>
			{% if hostsets %} {{ hostsets|safe }} {% endif %}
		</select>
		<br>
		<div style='font-style: italic; margin-bottom: 15px; margin-top: 8px;'>A bulk acquisition is similar to a normal forensic acquisition in HX but is targeting a list of hosts instead of individual hosts. You need to provide a compatible acquisition script and select a target host-set.<br>Also note that the download feature is only available once you have set the background processing credentials on the "<a href='/settings'>settings</a>" page.</div>
		
	        <input class='tableActionButton' type='submit' value='Start Bulk Acquisition'>
	</div>
</form>

<br>

<div class='tableTitle'>
	Bulk acquisitions on the controller
</div>

{% if bulktable %} {{ bulktable|safe }} {% endif %}

{% endblock %}
